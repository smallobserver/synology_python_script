# Synology_Python_Script


群辉上运行的脚本集合项目。



最近也是从黑群切换到了白裙，群辉的使用体验也确实很棒，哪怕是黑裙也足够稳定实用，但是想到是想一直维护的数据，所以还是入了白裙。然后实际使用中，也发现一些不尽如人意的地方，比如photos，虽然很好用，也可以使用时间轴来显示，但是在从个人的备份空间整理照片移动到共享空间的时候，照片的导入就不会触发photos自带的筛查分类，只会全部堆在你指定的文件夹，大致找了下也没有相应的功能，我这种有点强迫症的有点忍不了，就想写一段python脚本来自动帮忙把照片文件按照年月来分类进去，然后群辉上挂一个定期执行，感觉就挺好。能实现我想的那种“优雅”。



而且感觉后续的使用中肯定不止这么一个需求脚本，不如干脆开一个项目遇到需要的功能，优化就写上来，如果有缘人需要又看到了也能有一份帮助，但是总体说来这还是一个偏向私人的项目。



另外也是实现我个人学习练习下python的方案。



以上。





## photos脚本

##### 目的

如同上文说的，群辉在photos中如果你直接上传照片到photos的共享空间，系统会自动帮你把照片文件归类，但是如果你是同步了自己手机到个人空间，然后从个人空间中移动到共享空间，那么你指定到哪他就给你移动到哪，实际的文件目录会比较乱。虽然用时间轴模式查看倒是一样，但是我还是期望将其一并整理。



##### 使用

将下载的项目丢到自己的位置，然后修改config.ini中的photos_dir指定为需要整理的目标文件夹的绝对路径。

```ini
[common]
photos_dir = E:\test
```



然后在script_manager中,将config.read("")中的config.ini改为config.ini的绝对路径（ps：不知道为啥实测相对路径read就是读取不到，后续在研究罗）

```python
def main():
    \# 创建配置解析器对象
    config = configparser.ConfigParser()

​    \# 读取配置文件 最好改成绝对路径,不然在群辉跑不起来
​    config.read('config.ini')
​    \# 照片文件目录格式化
​    formatPhotosFile(config)
```



使用SSH连接群辉使用python命令执行脚本

```python
python XXXXXXX\script_manager.py  #此处同样为绝对路径
```



或者在群辉计划任务中设置上述代码



##### 注意点

- 几处路径需要使用绝对路径
- 执行完成后目标处有同名文件，当前文件会留在原位置手动清理下即可（一般不多）
- 执行完成后群辉会重新索引图片/视频，在photos刚完成的一段时间无法预览为正常现象
- 实际使用中发现群辉会给photos里面的照片生成对应的缩略图文件，新增跳过